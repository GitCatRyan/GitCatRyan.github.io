---
layout: post
title: Docker原理简介
date: 2018-07-07 12:50:24.000000000 +08:00
---

**一、Docker是什么**

为了能让软件开发不受不同环境配置的影响，有的人想到：是否可以在软件安装的时候把原始环境也一模一样地复制过来，这样就不必担心软件移植到别的计算机上不能用了。

现有的两种主流解决方法是：虚拟机、Linux容器。

虚拟机是用软件模拟操作系统，但是存在几个缺点：资源占用多、冗余步骤多、启动慢。

为了克服这些缺点，Linux发展出了Linux容器（Linux Containers，LXC）技术。它不是模拟一个完整的操作系统，而是对进程进行隔离。

容器的优势在于：启动快、占用资源少、体积小。

Docker属于LXC容器的一种封装，提供简单易用的容器使用接口，是目前最流行的LXC解决方案。

打个比方，Docker就是一个盒子，里面装了软件和它需要的依赖环境。一旦这个盒子被打包好，就可以方便地转移到其他机器上，只要是主流的Linux操作系统，就可以将盒子打开，软件直接用，省去了重新部署软件的麻烦事。

**二、Docker的应用场景**

- 提供一次性环境，可进行自动化测试和持续集成、发布。
- 提供弹性的云服务，根据Docker容器的开关来动态扩容或缩容。
- 组件微服务架构，通过多个容器，一台机器跑多个服务，可以在本地模拟出微服务器架构。

**三、Docker的优缺点**

优点包括：

- 简化程序。开发者可将应用和依赖打包到一个可移植的容器中，然后发布到任何其他Linux机器上，快速部署。
- 节省开支。开发者不必追求效果配置高额硬件，Docker与云结合可以解决硬件管理问题，同时让云空间得到更充分利用。
- 运维人员的福音。Docker能极大降低运维难度，相比于提升的运营成本而言性价比极高。

缺点包括：

- 适用于小型项目，如果项目过于庞大复杂可能会出现一些意想不到的异常情况。
- 系统服务和应用程序Docker化过程中会遇到许多实际问题和障碍，例如原始参数失效等。
- 共用Linux内核，安全性方面存在短板。

**四、Docker原理**

Docker使用客户端-服务器（C/S）架构模式，使用远程API管理和创建Docker容器。

先明确几个概念：

- 镜像（image）：Docker镜像是用于创建Docker容器的模板。
- 容器（container）：Docker容器是独立运行的一个或一组应用。
- 客户端（client）：Docker通过命令行或其他工具使用Docker API与Docker的守护进行通信。
- 主机（host）：一个物理或虚拟的机器，用于执行Docker守护进程和容器。
- 仓库（registry）：Docker仓库用来保存镜像，Docker Hub（ https://hub.docker.com ）提供了庞大的镜像集合可供使用。
 
容器与镜像的关系类似于面向对象编程中的对象与类。镜像类似于类，容器类似于对象。容器是通过镜像创建的。

最后摆张图就一目了然了：

